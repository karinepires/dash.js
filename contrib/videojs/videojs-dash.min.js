/*! videojs-contrib-dash - v1.1.0 - 2015-07-24
 * Copyright (c) 2015 Brightcove  */
(function(k,g){function b(a,e){var c=e.options(),d;this.tech_=e;this.el_=e.el();this.elParent_=this.el_.parentNode;a.src&&(e.isReady_=!1,d=a.src,this.keySystemOptions_=b.buildDashJSProtData(a.keySystemOptions),b.hideErrors(this.elParent_),b.useVideoJSDebug&&b.useVideoJSDebug(g),b.context_=b.context_||new Dash.di.DashContext,this.mediaPlayer_=new MediaPlayer(b.context_),this.mediaPlayer_.startup(),this.mediaPlayer_.attachView(this.el_),c.autoplay||this.mediaPlayer_.setAutoPlay(!1),this.mediaPlayer_.retrieveManifest(d,
g.bind(this,this.initializeDashJS)))}var h=function(a,b){var c,d,f;for(c in b)b.hasOwnProperty(c)&&(d=a[c],f=b[c],"[object Object]"===Object.prototype.toString.call(d)&&"[object Object]"===Object.prototype.toString.call(f)?a[c]=h(d,f):a[c]=b[c]);return a};b.prototype.initializeDashJS=function(a,e){var c={};e?(b.showErrors(this.elParent_),this.tech_.triggerReady(),this.dispose()):(b.getWidevineProtectionData&&(c=b.getWidevineProtectionData(a),this.keySystemOptions_=h(this.keySystemOptions_,c)),this.resetSrc_(g.bind(this,
function(){b.showErrors(this.elParent_);this.mediaPlayer_.attachSource(a,null,this.keySystemOptions_);this.tech_.triggerReady()})))};b.hideErrors=function(a){a.className+="vjs-dashjs-hide-errors"};b.showErrors=function(a){setTimeout(function(){a.className=a.className.replace("vjs-dashjs-hide-errors","")},250)};b.buildDashJSProtData=function(a){var b,c,d,f={};if(!a||"[object Array]"!==Object.prototype.toString.call(a))return f;for(d=0;d<a.length;d++)b=a[d],c=h({},b.options),c.licenseUrl&&(c.laURL=
c.licenseUrl,delete c.licenseUrl),f[b.name]=c;return f};b.prototype.resetSrc_=function(a){this.el_&&(this.el_.src="",this.el_.setMediaKeys?this.el_.setMediaKeys(null).then(a,a):a())};b.prototype.dispose=function(){this.mediaPlayer_&&this.mediaPlayer_.reset();this.resetSrc_(function(){})};Boolean(k.MediaSource)&&g.Html5.registerSourceHandler({canHandleSource:function(a){var b=/\.mpd/i;return/^application\/dash\+xml/i.test(a.type)?"probably":b.test(a.src)?"maybe":""},handleSource:function(a,e){return new b(a,
e)}});g.Html5DashJS=b})(window,window.videojs);